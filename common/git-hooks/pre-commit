#!/bin/sh

# Check if a command exists
command_exists() {
    type "$1" >/dev/null 2>&1
}

# Check if rush is available
if ! command_exists rush; then
    echo "âŒ rush is not installed. Please install it before proceeding."
    exit 1
fi

echo "ğŸ” Running checks..."

# Execute the rush check command
echo "ğŸ“‹ Running 'rush check'..."
if ! rush check; then
    echo "âŒ The 'rush check' command failed. Please fix the errors before committing."
    exit 1
fi

# Update the git index
echo "ğŸ“ Updating the git index..."
git update-index --again

echo "âœ… All checks passed successfully!"
exit 0