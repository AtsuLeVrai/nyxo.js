#!/bin/sh

# Check if a command exists
command_exists() {
    type "$1" >/dev/null 2>&1
}

# Check if pnpm is available
if ! command_exists pnpm; then
    echo "âŒ pnpm is not installed. Please install it before proceeding."
    exit 1
fi

echo "ğŸ” Running checks..."

# Execute the check command
echo "ğŸ“‹ Running 'pnpm run check'..."
if ! pnpm run check; then
    echo "âŒ The 'check' command failed. Please fix the errors before committing."
    exit 1
fi

# Update the git index
echo "ğŸ“ Updating the git index..."
git update-index --again

echo "âœ… All checks passed successfully!"
exit 0